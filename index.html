<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1"></head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="main.css">
	<script type="text/javascript" src="script.js"></script>
	<script type="text/javascript">
var info;
var count = 5;
var currentSongs = "";
var currentDjs = "";
fetch('https://cors-anywhere.herokuapp.com/http://mc.krlx.org/api/v1/schedule/signage')
  .then(function(response) {
    return response.json();
  }).then(function(data) {
  });
  fetch('https://cors-anywhere.herokuapp.com/http://signage.krlx.org')
  .then(function(response) {
   
    return response.json();
  }).then(function(data) {
  	info = data;
  	console.log(data);
  	  setInterval(recheck(), 60);
  	  document.getElementById("now").innerHTML = currentShow(data);
  });
  function displaySongs(data,count) {
  	var songs = data.songs;
  	var i = 0;
  	var songtext = "";
  	while(i < count) {
  		songtext = songtext + (i+1) + ".  " + songs[i].title + " by " + songs[i].artist + "<br>";
  		i++;
  	}
  	return songtext;
  }
  function recheck() {
  	fetch('https://cors-anywhere.herokuapp.com/http://signage.krlx.org')
	  .then(function(response) {
	    return response.json();
	  }).then(function(data) {
	  	  info = data;
	  });
  	var tempsave = displaySongs(info,count);
  	if(tempsave.localeCompare(currentSongs)!= 0){
  		console.log("yes")
  		currentSongs = tempsave;
  		document.getElementById("songs").innerHTML = currentSongs;
  		}
	}
	function currentShow(data) {
		var djs = "";
		for (var i = data.now.djs.length - 1; i >= 0; i--) {
			djs = djs + " " + data.now.djs[i];
		}
		var djtext =  djs + '<h2 style="padding: 0px;margin: 0px;" class="dogood">'+ data.now.title + "</h2>";
  	return djtext;
  }
  function newshowCheck() {
	  
  	var tempsave = displaySongs(info,count);
  	if(tempsave != currentSongs){
  		currentSongs = tempsave;
  		document.getElementById("songs").innerHTML = currentSongs;
  		}
	}
	</script>
</head>
<body>
<div style="  width: 100%;
">
<div style="position:fixed;">
	<marquee direction="up" style="text-align: center; " scrollamount="1.65">
		<h3 class="dogood" id="songs"></h3>
	</marquee>
	<marquee direction="down" style="text-align: left; " scrollamount="1.65">
		<h2 class="dogood" id="now"></h2>
	</marquee>
</div>


     <marquee *><h1><a class="all" onclick="playAudio()">play the radio</a></h1></marquee>
      <br>
      
      <marquee * direction="right"><h1><a class="all" onclick="playAudio()">play the radio</a>
</h1></marquee>
<br>
       <marquee * ><h1><a class="all" onclick="playAudio()">play the radio</a></h1></marquee>
      <br>
      
      <marquee * direction="right"><h1><a class="all" onclick="playAudio()">play the radio</a>
</h1></marquee>
<br>
     <marquee *><h1><a class="all" onclick="playAudio()">play the radio</a></h1></marquee>
      <br>
      
      <marquee * direction="right"><h1><a class="all" onclick="playAudio()">play the radio</a>
</h1></marquee>
<br>
     <marquee *><h1><a class="all" onclick="playAudio()">play the radio</a></h1></marquee>
      <br>
      
      <marquee * direction="right"><h1><a class="all" onclick="playAudio()">play the radio</a>
</h1></marquee>
<br>   

    </div>
<div style="right: 10px; position: fixed;">
	<a class="stop" id="louder" onclick="louder()" style="display: none; font-size: 1em;">louder</a>
	<br>
<a class="stop" id="stopper" onclick="pauseAudio()" style="display: none;">pause</a>
<br>
<a class="stop" id="quieter" onclick="quieter()" style="display: none;font-size: 1em;">quieter</a>
</div>


</body>
</html>